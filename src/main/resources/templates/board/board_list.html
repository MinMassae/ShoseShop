<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8">
  <title>æ²ç¤ºæ¿</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 20px;
    }
    header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 10px 0;
      border-bottom: 1px solid #ddd;
    }
    #logo {
      font-size: 20px;
      font-weight: bold;
      cursor: pointer;
    }
    nav ul {
      display: flex;
      list-style: none;
      gap: 15px;
      padding: 0;
    }
    nav ul li a {
      text-decoration: none;
      color: #333;
    }
    main {
      display: flex;
      margin-top: 20px;
    }
    aside {
      width: 200px;
      border-right: 1px solid #ccc;
      padding-right: 10px;
    }
    section {
      flex: 1;
      padding-left: 20px;
    }
    table {
      width: 100%;
      border-collapse: collapse;
    }
    th, td {
      border: 1px solid #ddd;
      padding: 8px;
      text-align: left;
    }
    th {
      background-color: #f0f0f0;
    }
    .write-btn {
      margin: 10px 0;
    }
    .pagination {
      margin-top: 20px;
    }
    .pagination a {
      margin: 0 5px;
      text-decoration: none;
      color: blue;
    }
  </style>
</head>
<body>

<header>
  <div id="logo" onclick="location.href='/'">ğŸ‘Ÿ ShoseShop</div>
  <nav>
    <ul id="menu">
      <!-- JSë¡œ ì‚½ì… -->
    </ul>
  </nav>
</header>

<main>
  <aside>
    <ul>
      <li><a href="/board?type=notice">ãŠã—ã‚‰ã›</a></li>
      <li><a href="/board?type=qna">Q&A</a></li>
    </ul>
  </aside>

  <section>
    <h2 th:text="${type == 'notice' ? 'ğŸ“¢ ãŠã—ã‚‰ã›' : 'â“ Q&A'}"></h2>

    <!-- âœ ê¸€ ì‘ì„± ë²„íŠ¼ -->
    <div class="write-btn">
      <a th:if="${type == 'notice' and isAdmin}" th:href="@{'/board/write'(type=${type})}">
        <button>âœï¸ æ–°è¦ä½œæˆï¼ˆç®¡ç†è€…ï¼‰</button>
      </a>
      <a th:if="${type == 'qna' and isLogin}" th:href="@{'/board/write'(type=${type})}">
        <button>âœï¸ è³ªå•ã‚’æ›¸ã</button>
      </a>
    </div>

    <!-- ğŸ“‹ ê²Œì‹œê¸€ ëª©ë¡ -->
    <table>
      <thead>
      <tr>
        <th>ã‚¿ã‚¤ãƒˆãƒ«</th>
        <th>ä½œæˆè€…</th>
        <th>ä½œæˆæ—¥</th>
      </tr>
      </thead>
      <tbody>
      <tr th:each="post : ${posts}">
        <td><a th:href="@{'/board/' + ${post.id}}" th:text="${post.title}">ã‚¿ã‚¤ãƒˆãƒ«</a></td>
        <td th:text="${post.writer}">ì‘ì„±ì</td>
        <td th:text="${#temporals.format(post.createdAt, 'yyyy-MM-dd')}">ä½œæˆæ—¥</td>
      </tr>
      </tbody>
    </table>

    <!-- í˜ì´ì§€ë„¤ì´ì…˜ -->
    <div class="pagination">
      <a th:if="${page > 0}" th:href="@{'/board'(type=${type}, page=${page - 1})}">å‰ã¸</a>
      <span th:text="${page + 1}">1</span>
      <a th:if="${page + 1 < totalPages}" th:href="@{'/board'(type=${type}, page=${page + 1})}">æ¬¡ã¸</a>
    </div>
  </section>
</main>

<script>
  const token = localStorage.getItem("accessToken");
  const menu = document.getElementById("menu");

  if (token) {
    menu.innerHTML = `
      <li><a href="/items">å•†å“ä¸€è¦§</a></li>
      <li><a href="/mypage">ãƒã‚¤ãƒšãƒ¼ã‚¸</a></li>
      <li><a href="/board">æ²ç¤ºæ¿</a></li>
      <li><a href="#" onclick="logout()">ãƒ­ã‚°ã‚¢ã‚¦ãƒˆ</a></li>
    `;
  } else {
    menu.innerHTML = `
      <li><a href="/items">å•†å“ä¸€è¦§</a></li>
      <li><a href="/login">ãƒ­ã‚°ã‚¤ãƒ³</a></li>
      <li><a href="/register">ä¼šå“¡ç™»éŒ²</a></li>
      <li><a href="/board">æ²ç¤ºæ¿</a></li>
    `;
  }

  function logout() {
    localStorage.removeItem("accessToken");
    location.href = "/login";
  }
</script>

</body>
</html>
